const { PlayerIO } = require('../index');

const config = {
    PLAYER_IO: {
        gameId: '',
        connectionId: 'public',
        roomType: 'room',
    }
};

async function connectClient() {
    return new Promise((resolve, reject) => PlayerIO.authenticate(
        config.PLAYER_IO.gameId,
        config.PLAYER_IO.connectionId,
        { userId: "playerio-node-lib-test" },
        {},
        resolve,
        reject
    ));
}

async function getTopSupporters(params) {
    const client = await connectClient();
    return new Promise((resolve, reject) => client.bigDB.loadRange(
        'Players',
        'ByCreatorIdTotalPoints',
        [params.creatorId],
        Number.MAX,
        0,
        10,
        resolve,
        reject
    ));
}

(async () => {
    let supporters = await getTopSupporters({
        creatorId: '54556'
    });
    console.log(supporters);
})();